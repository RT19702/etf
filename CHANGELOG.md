# 📋 ETF策略系统更新日志

## 🎉 v2.3.0 - 项目简化与清理 (2025-07-14)

### 🧹 项目清理

#### 删除基础版本
- **移除基础策略**: 删除 `node.js`、`src/scheduler.js` 等基础版本文件
- **移除基础脚本**: 清理 `scripts/` 目录中的基础版本和测试脚本
- **移除基础模块**: 删除 `src/strategies/basicStrategy.js`、`src/monitors/` 等
- **统一入口**: 现在 `npm start` 直接运行增强版策略

#### 简化命令结构
- **主要命令**: `npm start` (策略分析)、`npm run auto` (定时推送)
- **辅助命令**: `npm run push`、`npm run quick-test`、`npm run verify`
- **移除冗余**: 删除重复和过时的命令选项

#### 文档更新
- 更新 README.md，移除基础版本引用
- 简化使用说明和命令介绍
- 保留核心功能文档

---

## 🎉 v2.2.1 - 修复重复推送问题 (2025-07-14)

### 🐛 问题修复

#### 📱 重复推送修复
- **修复启动时重复推送**: 解决了启动定时任务时发送两遍报告的问题
- **优化推送逻辑**: 调度器不再重复发送增强版策略内部已推送的报告
- **改进启动通知**: 合并启动通知和策略分析提示，减少推送频率

#### 🔧 技术优化
- 移除调度器中的重复推送逻辑
- 优化启动时推送的消息内容
- 改进错误处理和日志记录

---

## 🎉 v2.2.0 - 特别关注功能与安全增强 (2025-07-14)

### ✨ 新增功能

#### 🔍 特别关注功能
- **智能监控**: 支持多种关注条件的ETF监控
  - RSI超卖/超买检测
  - 价格异动监控
  - 成交量异常检测
  - 技术评分监控
  - 高波动率预警
  - 买入/卖出信号监控

- **优先级管理**: 三级优先级分类系统
  - 🔴 高优先级 (high) - 重要投资机会
  - 🟡 中等优先级 (medium) - 一般关注
  - 🟢 低优先级 (low) - 参考信息

- **企业微信集成**: 特别关注提示直接推送到微信群
  - 实时提醒重要投资机会
  - 详细的触发条件说明
  - 当前市场数据展示

#### 🔐 安全配置增强
- **Git安全保护**: 完善的.gitignore配置
  - 自动过滤敏感配置文件
  - 保护API密钥和Webhook URL
  - 防止数据文件误提交

- **配置模板系统**: 
  - `config/.env.example` 配置模板
  - 详细的配置说明和示例
  - 安全配置指南文档

- **功能验证脚本**: `npm run verify`
  - 自动检查系统配置
  - 验证功能完整性
  - 提供修复建议

### 🛠️ 改进优化

#### 📊 报告增强
- 在策略报告中添加特别关注区域
- 企业微信推送包含关注提示
- 更详细的技术指标展示

#### 🎯 用户体验
- 新增 `npm run strategy` 快捷命令
- 添加 `npm run verify` 系统验证
- 完善的文档和使用指南

### 📚 文档更新
- 新增 `docs/SECURITY_GUIDE.md` 安全配置指南
- 更新 `README.md` 包含特别关注功能说明
- 完善快速开始指南

### 🔧 技术改进
- 优化特别关注模块架构
- 改进错误处理和日志记录
- 增强配置管理系统

---

## 📋 使用指南

### 🚀 快速开始
```bash
# 1. 复制配置模板
cp config/.env.example config/.env

# 2. 编辑配置文件，填入您的企业微信Webhook URL

# 3. 验证系统配置
npm run verify

# 4. 测试企业微信推送
npm run quick-test

# 5. 运行策略分析
npm run strategy
```

### 🔍 配置特别关注ETF
编辑 `config/.env` 文件中的 `SPECIAL_WATCH_LIST`：

```json
[
  {
    "symbol": "sh512800",
    "name": "银行ETF",
    "conditions": ["rsi_oversold", "price_change"],
    "thresholds": {
      "rsi_max": 25,
      "price_change_min": 3
    },
    "priority": "high",
    "reason": "金融板块轮动机会"
  }
]
```

### 📱 企业微信推送示例
当银行ETF触发关注条件时，您会收到类似这样的推送：

```
🔍 特别关注提示

🔴 银行ETF (sh512800)
  - 关注原因: 金融板块轮动机会
  ⚠️ RSI超卖 (15.0 < 25)
  - 当前价格: ¥0.901
  - RSI: 15.0
  - 技术评分: 60/100
```

### 🛡️ 安全注意事项
- ✅ 已配置 `.gitignore` 保护敏感文件
- ✅ 使用配置模板避免泄露真实密钥
- ✅ 详细的安全配置指南
- ⚠️ 请定期更换企业微信机器人密钥

---

## 🎯 下一步计划

### v2.3.0 规划
- [ ] 更多技术指标支持
- [ ] 回测功能增强
- [ ] 移动端推送支持
- [ ] 数据可视化改进

### 长期规划
- [ ] 机器学习模型集成
- [ ] 多市场支持
- [ ] 云端部署方案
- [ ] API接口开放

---

## 📞 技术支持

如果您在使用过程中遇到问题：

1. 运行 `npm run verify` 检查系统状态
2. 查看 `docs/SECURITY_GUIDE.md` 配置指南
3. 检查 `logs/` 目录下的错误日志
4. 参考 `QUICK_REFERENCE.md` 快速命令

---

**🎉 感谢使用ETF策略系统！祝您投资顺利！**
